<!DOCTYPE html>
<html lang="th">
<head>
  <base href="/">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://fonts.googleapis.com/css2?family=Sarabun&display=swap" rel="stylesheet">
  <title>รายการสินค้า | เล็กเจริญบัวบงกช</title>
  <link rel="stylesheet" href="style.css">
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <style>
    /* สไตล์ตะกร้าสินค้า */
    .cart-icon {
      position: fixed;
      top: 20px;
      right: 20px;
      background-color: #ff4aba;
      color: white;
      border: none;
      padding: 15px;
      border-radius: 50%;
      font-size: 20px;
      cursor: pointer;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    .cart-count {
      position: absolute;
      top: -5px;
      right: -5px;
      background-color: red;
      color: white;
      font-size: 12px;
      padding: 5px;
      border-radius: 50%;
    }
    .cart-popup {
      position: fixed;
      top: 80px;
      right: 20px;
      background-color: white;
      border: 1px solid #ccc;
      border-radius: 10px;
      padding: 20px;
      width: 300px;
      display: none;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }
    .cart-popup h3 {
      margin-top: 0;
    }
    .cart-popup ul {
      list-style: none;
      padding: 0;
      margin: 0;
    }
    .cart-popup ul li {
      margin-bottom: 10px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .cart-popup button {
      background-color: #ff4aba;
      color: white;
      padding: 10px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      width: 100%;
    }
    .remove-btn {
      background-color: red;
      color: white;
      border: none;
      padding: 5px;
      border-radius: 5px;
      cursor: pointer;
    }
    .item-number {
      font-size: 0.8em;
      color: #888;
      margin-right: 10px;
    }
    .total-price {
      font-weight: bold;
      margin-top: 10px;
      text-align: center;
    }
  </style>
</head>
<body>
  <header>
    <div class="logo-group">
      <img src="11.jpg" alt="โลโก้บริษัท" class="logo">
      <img src="otop4star.png" alt="โลโก้ OTOP 4 ดาว" class="otop-logo">
    </div>
    <h1>รายการสินค้า</h1>
    <a href="index.html">← กลับหน้าหลัก</a>
  </header>

  <main>
    <section class="products">
      <!-- สินค้า 01-10 -->
      <div class="product">
        <img src="210.png" alt="ยาหม่องขี้ผึ้งขาวเกสรดอกบัว 210 กรัม">
        <h3>ยาหม่องขี้ผึ้งขาวเกสรดอกบัว ตราบัวบงกช 210 กรัม</h3>
        <p>200 บาท</p>
        <button class="add-to-cart" data-name="ยาหม่อง 210 กรัม" data-price="200">หยิบใส่ตะกร้า</button>
      </div>
      <div class="product">
        <img src="120.png" alt="ยาหม่องขี้ผึ้งขาวเกสรดอกบัว 120 กรัม">
        <h3>ยาหม่องขี้ผึ้งขาวเกสรดอกบัว ตราบัวบงกช 120 กรัม</h3>
        <p>130 บาท</p>
        <button class="add-to-cart" data-name="ยาหม่อง 120 กรัม" data-price="130">หยิบใส่ตะกร้า</button>
      </div>
      <div class="product">
        <img src="50.png" alt="ยาหม่องขี้ผึ้งขาวเกสรดอกบัว 50 กรัม">
        <h3>ยาหม่องขี้ผึ้งขาวเกสรดอกบัว ตราบัวบงกช 50 กรัม</h3>
        <p>80 บาท</p>
        <button class="add-to-cart" data-name="ยาหม่อง 50 กรัม" data-price="80">หยิบใส่ตะกร้า</button>
      </div>
      <div class="product">
        <img src="25.png" alt="ยาหม่องขี้ผึ้งขาวเกสรดอกบัว 25 กรัม">
        <h3>ยาหม่องขี้ผึ้งขาวเกสรดอกบัว ตราบัวบงกช 25 กรัม</h3>
        <p>75 บาท</p>
        <button class="add-to-cart" data-name="ยาหม่อง 25 กรัม" data-price="75">หยิบใส่ตะกร้า</button>
      </div>
      <div class="product">
        <img src="8.png" alt="ยาหม่องขี้ผึ้งขาวเกสรดอกบัว 8 กรัม">
        <h3>ยาหม่องขี้ผึ้งขาวเกสรดอกบัว ตราบัวบงกช 8 กรัม</h3>
        <p>30 บาท</p>
        <button class="add-to-cart" data-name="ยาหม่อง 8 กรัม" data-price="30">หยิบใส่ตะกร้า</button>
      </div>
      <div class="product">
        <img src="200.png" alt="น้ำมันเกสรดอกบัว ตราบัวบงกช 24 ซีซี">
        <h3>น้ำมันเกสรดอกบัว ตราบัวบงกช 24 ซีซี</h3>
        <p>200 บาท</p>
        <button class="add-to-cart" data-name="น้ำมันเกสรดอกบัว 24 ซีซี" data-price="200">หยิบใส่ตะกร้า</button>
      </div>
      <div class="product">
        <img src="200bhat.png" alt="ยาหม่องน้ำสมุนไพร ตราไก่ 24 ซีซี">
        <h3>ยาหม่องน้ำสมุนไพร ตราไก่ 24 ซีซี</h3>
        <p>200 บาท</p>
        <button class="add-to-cart" data-name="ยาหม่องน้ำสมุนไพร 24 ซีซี" data-price="200">หยิบใส่ตะกร้า</button>
      </div>
      <div class="product">
        <img src="gaysondokbuaLukkling.png" alt="ยาหม่องน้ำสมุนไพร ตราไก่ (ลูกกลิ้ง) 5 ซีซี">
        <h3>ยาหม่องน้ำสมุนไพร ตราไก่ (ลูกกลิ้ง) 5 ซีซี</h3>
        <p>90 บาท</p>
        <button class="add-to-cart" data-name="ยาหม่องน้ำสมุนไพร ตราไก่ (ลูกกลิ้ง) 5 ซีซี" data-price="90">หยิบใส่ตะกร้า</button>
      </div>
      <div class="product">
        <img src="gaysondokbuaLukkling1.png" alt="น้ำมันเกสรดอกบัว ตราบัวบงกช (ลูกกลิ้ง) 5 ซีซี">
        <h3>น้ำมันเกสรดอกบัว ตราบัวบงกช (ลูกกลิ้ง) 5 ซีซี</h3>
        <p>90 บาท</p>
        <button class="add-to-cart" data-name="น้ำมันเกสรดอกบัว ตราบัวบงกช (ลูกกลิ้ง) 5 ซีซี" data-price="90">หยิบใส่ตะกร้า</button>
      </div>
      <div class="product">
        <img src="unchan.png" alt="แชมพูสระผมดอกอัญชัน">
        <h3>แชมพูสระผมดอกอัญชัน</h3>
        <p>200 บาท</p>
        <button class="add-to-cart" data-name="แชมพูสระผมดอกอัญชัน" data-price="200">หยิบใส่ตะกร้า</button>
      </div>
      <div class="product">
        <img src="tacihom.png" alt="ยาหม่องขี้ผึ้งตะไคร้หอม 210 กรัม">
        <h3>ยาหม่องขี้ผึ้งตะไคร้หอม 210 กรัม</h3>
        <p>200 บาท</p>
        <button class="add-to-cart" data-name="ยาหม่องขี้ผึ้งตะไคร้หอม 210 กรัม" data-price="200">หยิบใส่ตะกร้า</button>
      </div>
      <div class="product">
        <img src="tacihomnamman.png" alt="น้ำมันตะไคร้หอม 24 ซีซี">
        <h3>น้ำมันตะไคร้หอม 24 ซีซี</h3>
        <p>200 บาท</p>
        <button class="add-to-cart" data-name="น้ำมันตะไคร้หอม 24 ซีซี" data-price="200">หยิบใส่ตะกร้า</button>
      </div>
      <div class="product">
        <img src="yahom.png" alt="ยาหอมบำรุงหัวใจ">
        <h3>ยาหอมบำรุงหัวใจ</h3>
        <p>130 บาท</p>
        <button class="add-to-cart" data-name="ยาหอมบำรุงหัวใจ" data-price="130">หยิบใส่ตะกร้า</button>
      </div>
      <div class="product">
        <img src="Greenoil1.png" alt="น้ำมันเขียว 5 ซีซี">
        <h3>น้ำมันเขียว 5 กรัม</h3>
        <p>40 บาท</p>
        <button class="add-to-cart" data-name="น้ำมันเขียว 5 ซีซี" data-price="40">หยิบใส่ตะกร้า</button>
      </div>
      <div class="product">
        <img src="Greenoil2.png" alt="น้ำมันเขียว 24 ซีซี">
        <h3>น้ำมันเขียว 24 ซีซี</h3>
        <p>60 บาท</p>
        <button class="add-to-cart" data-name="น้ำมันเขียว 24 ซีซี" data-price="60">หยิบใส่ตะกร้า</button>
      </div>
      <div class="product">
        <img src="Greenoil3.png" alt="น้ำมันเขียว 24 ซีซี">
        <h3>น้ำมันเขียว 24 กรัม</h3>
        <p>99 บาท</p>
        <button class="add-to-cart" data-name="น้ำมันเขียว 24 ซีซี" data-price="99">หยิบใส่ตะกร้า</button>
      </div>
      <div class="product">
        <img src="Yellowoil1.png" alt="น้ำมันเหลืองไพล-ขมิ้น 24 ซีซี">
        <h3>น้ำมันเหลืองไพล-ขมิ้น 24 ซีซี</h3>
        <p>200 บาท</p>
        <button class="add-to-cart" data-name="น้ำมันเหลืองไพล-ขมิ้น 24 ซีซี" data-price="200">หยิบใส่ตะกร้า</button>
      </div>
      <div class="product">
        <img src="yadom.png" alt="ยาดมสมุนไพร ตรา บัวบงกช">
        <h3>ยาดมสมุนไพร ตรา บัวบงกช</h3>
        <p>25 บาท</p>
        <button class="add-to-cart" data-name="ยาดมสมุนไพร ตรา บัวบงกช" data-price="25">หยิบใส่ตะกร้า</button>
      </div>
    </section>
  </main>

  <footer>
    <p>© 2025 บริษัท เล็กเจริญบัวบงกช จำกัด</p>
  </footer>

  <!-- ตะกร้าสินค้าและป๊อปอัพ -->
 <!-- ตะกร้าสินค้าและป๊อปอัพ -->
<button class="cart-icon" onclick="toggleCart()">🛒
  <span class="cart-count" id="cart-count">0</span>
</button>

<div class="cart-popup">
  <h3>รายการสินค้าในตะกร้า</h3>
  <ul id="cart-items">
    <!-- รายการสินค้าในตะกร้าจะแสดงที่นี่ -->
  </ul>
  <div class="total-price">
    <p>ยอดรวม: <span id="total-price">0</span> บาท</p>
  </div>  
<!-- ปุ่มไปยังหน้าชำระเงิน -->
<button onclick="window.location.href='payment.html'" style="
    background-color: #28a745;
    color: white;
    padding: 12px 20px;
    border: none;
    border-radius: 5px;
    font-size: 18px;
    font-family: 'Sarabun', sans-serif;
    cursor: pointer;
">
    🛒 ไปยังหน้าชำระเงิน
</button>
<div class="cart-message">
  <p>กรุณาแคปหน้าจอหน้าตะกร้านี้ และจำราคาเวลาโอนด้วย !!!</p>
  <p>หากท่านไม่ทำตาม เราจะถือว่า ออเดอร์ท่านเป็นโมฆะ</p>
</div>

  <div class="cart-popup">
    <h3>รายการสินค้าในตะกร้า</h3>
    <ul id="cart-items">
      <!-- รายการสินค้าในตะกร้าจะแสดงที่นี่ -->
    </ul>
    <div id="cart-items"></div>
<p><strong>รวมทั้งสิ้น: <span id="total">50</span> บาท</strong></p>
    </div> 

  <script>
    const cart = [];

    document.querySelectorAll('.add-to-cart').forEach(button => {
      button.addEventListener('click', () => {
        const productName = button.getAttribute('data-name');
        const productPrice = button.getAttribute('data-price');
        
        cart.push({ name: productName, price: parseInt(productPrice) });
        updateCart();
        updateCartCount();
        updateTotalPrice();
        Swal.fire({
          icon: 'success',
          title: 'สินค้าถูกเพิ่มในตะกร้า',
          text: `${productName} ราคา ${productPrice} บาท`,
        });
      });
    });

    function updateCart() {
      const cartItemsContainer = document.getElementById('cart-items');
      cartItemsContainer.innerHTML = ''; // ลบรายการเก่า

      cart.forEach((item, index) => {
        const listItem = document.createElement('li');

        // เพิ่มเลขรายการสินค้า
        const itemNumber = document.createElement('span');
        itemNumber.classList.add('item-number');
        itemNumber.textContent = `#${index + 1}`;
        
        listItem.appendChild(itemNumber);
        listItem.appendChild(document.createTextNode(`${item.name} - ${item.price} บาท`));

        const removeButton = document.createElement('button');
        removeButton.textContent = 'ลบ';
        removeButton.className = 'remove-btn';
        removeButton.onclick = () => removeFromCart(index);

        listItem.appendChild(removeButton);
        cartItemsContainer.appendChild(listItem);
      });
    }

    function removeFromCart(index) {
      cart.splice(index, 1);  // ลบสินค้าจากตะกร้า
      updateCart();  // อัปเดตตะกร้า
      updateCartCount();
      updateTotalPrice();
    }

    function updateCartCount() {
      const cartCount = document.getElementById('cart-count');
      cartCount.textContent = cart.length;  // อัปเดตจำนวนสินค้าตะกร้า
    }

    function updateTotalPrice() {
      const totalPrice = cart.reduce((total, item) => total + item.price, 0);
      document.getElementById('total-price').textContent = totalPrice;  // อัปเดตยอดรวม
    }

    function toggleCart() {
      const cartPopup = document.querySelector('.cart-popup');
      cartPopup.style.display = (cartPopup.style.display === 'block') ? 'none' : 'block';
    }

    function checkout() {
      if (cart.length === 0) {
        Swal.fire({
          icon: 'warning',
          title: 'ไม่มีสินค้าในตะกร้า',
          text: 'กรุณาเลือกสินค้าก่อน',
        });
        return;
      }

      let cartText = 'สินค้าที่คุณเลือก:\n';
      let totalPrice = 0;

      cart.forEach(item => {
        cartText += `${item.name} - ${item.price} บาท\n`;
        totalPrice += item.price;
      });

      const total = `รวม: ${totalPrice} บาท`;

      Swal.fire({
        title: 'กรุณากรอกข้อมูลของคุณ',
        html: `
          <label for="name">ชื่อ:</label>
          <input type="text" id="name" placeholder="กรุณากรอกชื่อ" class="swal2-input">
          <label for="phone">เบอร์โทร:</label>
          <input type="text" id="phone" placeholder="กรุณากรอกเบอร์โทร" class="swal2-input">
        `,
        confirmButtonText: 'ส่งไป LINE',
        preConfirm: () => {
          const name = document.getElementById('name').value;
          const phone = document.getElementById('phone').value;

          if (!name || !phone) {
            Swal.showValidationMessage('กรุณากรอกชื่อและเบอร์โทร');
            return false;
          }

          const message = `
            สินค้าที่เลือก:
            ${cartText}
            ${total}

            ชื่อ: ${name}
            เบอร์โทร: ${phone}
          `;

          // ส่งไป LINE
          const lineLink = `https://line.me/ti/p/YYleJBZpsP?text=${encodeURIComponent(message)}`;
          window.open(lineLink, '_blank');
        }
      });
    }
  </script>
</body>
</html>